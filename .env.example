# MCP Finance Environment Variables
# Copy this file to .env.local and fill in the actual values
# IMPORTANT: Never commit .env.local to git - it contains secrets!

################################################################################
# CLERK AUTHENTICATION
################################################################################
# Get these from: https://dashboard.clerk.com
# 1. Go to API Keys
# 2. Copy the Publishable Key and Secret Key

# Public key - safe to expose to client
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Secret key - keep private!
CLERK_SECRET_KEY=sk_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Clerk URLs - default values, adjust if needed
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up

# Webhook secret for Clerk events
# Get from: Clerk Dashboard → Webhooks → Create Endpoint
CLERK_WEBHOOK_SECRET=whsec_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

################################################################################
# STRIPE PAYMENTS
################################################################################
# Get from: https://dashboard.stripe.com/apikeys
# Use test keys for development, live keys for production

# Public key - safe to expose to client
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Secret key - keep private!
STRIPE_SECRET_KEY=sk_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Webhook secret - get from Stripe Dashboard → Webhooks
# For local testing, use Stripe CLI: stripe listen --forward-to localhost:3000/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Price IDs - Create products/prices in Stripe Dashboard → Products
# Create 4 prices: Pro Monthly, Pro Yearly, Max Monthly, Max Yearly
STRIPE_PRO_MONTHLY_PRICE_ID=price_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_PRO_YEARLY_PRICE_ID=price_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_MAX_MONTHLY_PRICE_ID=price_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_MAX_YEARLY_PRICE_ID=price_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

################################################################################
# MCP CLOUD RUN API
################################################################################
# Get from: GCP Console → Cloud Run → Select your service
# Format: https://service-name-XXXXX.run.app

MCP_CLOUD_RUN_URL=https://technical-analysis-api-XXXXX.run.app

################################################################################
# DATABASE (OPTIONAL - Only needed for production)
################################################################################
# For local development, you can skip this
# For Cloud SQL, get from: GCP Console → Cloud SQL → Connection name
# Format: postgresql://username:password@host:port/database

# Connection string format:
# DATABASE_URL=postgresql://user:password@localhost:5432/mcp_finance

# For Cloud SQL Unix socket (Vercel-compatible):
# DATABASE_URL=postgresql://user:password@/dbname?host=/cloudsql/project:region:instance

DATABASE_URL=postgresql://user:password@localhost:5432/mcp_finance

################################################################################
# OPTIONAL: ADMIN CONFIGURATION
################################################################################
# Comma-separated list of admin email addresses
# These users get admin permissions in the system
ADMIN_EMAILS=admin@example.com,owner@example.com

################################################################################
# OPTIONAL: MONITORING & ANALYTICS
################################################################################
# Sentry (error tracking) - optional
# SENTRY_DSN=https://XXXXX@sentry.io/XXXXX

# PostHog (analytics) - optional
# NEXT_PUBLIC_POSTHOG_KEY=phc_XXXXX
# NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

################################################################################
# DEPLOYMENT ENVIRONMENT
################################################################################
# Set by Vercel automatically
# NODE_ENV=development|production

# App URL - used for Stripe redirects
# Set to your production domain in Vercel
NEXT_PUBLIC_APP_URL=http://localhost:3000

################################################################################
# NOTES FOR SETUP
################################################################################
# 1. CLERK SETUP:
#    - Go to https://dashboard.clerk.com
#    - Create application or use existing
#    - Copy Publishable Key → NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
#    - Copy Secret Key → CLERK_SECRET_KEY
#    - Create Webhook → CLERK_WEBHOOK_SECRET
#
# 2. STRIPE SETUP:
#    - Go to https://dashboard.stripe.com
#    - Get API keys (test for development, live for production)
#    - Create Products in Dashboard → Products:
#      • "Pro Monthly" - $29/month recurring
#      • "Pro Yearly" - $290/year recurring
#      • "Max Monthly" - $99/month recurring
#      • "Max Yearly" - $990/year recurring
#    - Copy each Price ID to the STRIPE_*_PRICE_ID variables
#    - Create Webhook endpoint → Webhooks → Add endpoint:
#      • URL: https://yourdomain.com/api/webhooks/stripe
#      • Events: checkout.session.completed, customer.subscription.*
#      • Copy signing secret → STRIPE_WEBHOOK_SECRET
#    - For local testing: stripe listen --forward-to localhost:3000/api/webhooks/stripe
#    - Configure Customer Portal: Settings → Billing → Customer portal
#
# 3. MCP CLOUD RUN SETUP:
#    - Deploy mcp-finance1 to Cloud Run: https://cloud.google.com/run/docs
#    - Copy service URL → MCP_CLOUD_RUN_URL
#    - Make sure service allows unauthenticated access
#
# 4. DATABASE SETUP (Optional):
#    - Create Cloud SQL PostgreSQL instance
#    - Create user and database
#    - Update DATABASE_URL connection string
#    - Run migrations: npm run db:migrate
#
# 5. LOCAL DEVELOPMENT:
#    - Copy this file: cp .env.example .env.local
#    - Fill in the values for your local setup
#    - Start dev server: npm run dev
#    - You can test with Clerk test keys
#
# 6. PRODUCTION DEPLOYMENT:
#    - Add these variables to Vercel project settings
#    - Use production Clerk keys (pk_live_*, sk_live_*)
#    - Use production Cloud Run URL
#    - Use Cloud SQL DATABASE_URL
#    - Vercel will automatically use these for deployments
#
# 7. SECURITY REMINDERS:
#    - NEVER commit .env.local to git
#    - NEVER share secret keys
#    - NEVER upload credentials.json or .key files
#    - Use different keys for dev/prod
#    - Rotate secrets regularly
